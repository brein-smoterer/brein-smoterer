@page "/characters"
@using Genshin_Site.Data;
@inject NavigationManager NavManager
@using Microsoft.AspNetCore.Http.Extensions;
@inject charactersService service;

<h3>Character</h3>
<button @onclick="() => Expand(service.Get())">Expand all</button>
<button @onclick="() => Collaps(service.Get())">Collaps all</button>
<br>
@foreach (var character in service.Get())
    @*@foreach (var character in roster)*@
{
    <div>
        <CharacterComponent Character=@character />
        <button @onclick="() => GoToDetails(character)">Details</button>
    </div>
}

@code
{

    private void GoToDetails(Character character)
        => NavManager.NavigateTo($"/characters/{character.CharacterName}");

    public void Expand(List<Character> a)
    {
        foreach (var character in a)
        {
            character.Show = true;
        }
    }
    public void Collaps(List<Character> a)
    {
        foreach (var character in a)
        {
            character.Show = false;
        }
    }
    //Save to json
    //protected override void OnInitialized()
    //{
    //    service.Save();
    //    base.OnInitialized();
    //}
} 